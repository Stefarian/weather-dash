import React from 'react';
import axios from 'axios';
import moment from 'moment-timezone';
import Sidebar from './components/Sidebar';
import WeatherIcon from './components/WeatherIcon';

class App extends React.Component {
	constructor() {
		super();
		this.state = {
      weatherData: null,
      location: '',
      searchQuery: ''
		}
  }
  componentDidMount() {
    this.setState({ location: 'Cincinnati' });
    this.setState({weatherData: {"latitude":37.8267,"longitude":-122.4233,"timezone":"America/Los_Angeles","currently":{"time":1578626165,"summary":"Clear","icon":"clear-night","nearestStormDistance":0,"precipIntensity":0,"precipProbability":0,"temperature":50.08,"apparentTemperature":50.11,"dewPoint":42.9,"humidity":0.76,"pressure":1021.6,"windSpeed":2.45,"windGust":4.08,"windBearing":285,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":362.8},"minutely":{"summary":"Clear for the hour.","icon":"clear-night","data":[{"time":1578626160,"precipIntensity":0,"precipProbability":0},{"time":1578626220,"precipIntensity":0,"precipProbability":0},{"time":1578626280,"precipIntensity":0,"precipProbability":0},{"time":1578626340,"precipIntensity":0,"precipProbability":0},{"time":1578626400,"precipIntensity":0,"precipProbability":0},{"time":1578626460,"precipIntensity":0,"precipProbability":0},{"time":1578626520,"precipIntensity":0,"precipProbability":0},{"time":1578626580,"precipIntensity":0,"precipProbability":0},{"time":1578626640,"precipIntensity":0,"precipProbability":0},{"time":1578626700,"precipIntensity":0,"precipProbability":0},{"time":1578626760,"precipIntensity":0,"precipProbability":0},{"time":1578626820,"precipIntensity":0,"precipProbability":0},{"time":1578626880,"precipIntensity":0,"precipProbability":0},{"time":1578626940,"precipIntensity":0,"precipProbability":0},{"time":1578627000,"precipIntensity":0,"precipProbability":0},{"time":1578627060,"precipIntensity":0,"precipProbability":0},{"time":1578627120,"precipIntensity":0,"precipProbability":0},{"time":1578627180,"precipIntensity":0,"precipProbability":0},{"time":1578627240,"precipIntensity":0,"precipProbability":0},{"time":1578627300,"precipIntensity":0,"precipProbability":0},{"time":1578627360,"precipIntensity":0,"precipProbability":0},{"time":1578627420,"precipIntensity":0,"precipProbability":0},{"time":1578627480,"precipIntensity":0,"precipProbability":0},{"time":1578627540,"precipIntensity":0,"precipProbability":0},{"time":1578627600,"precipIntensity":0,"precipProbability":0},{"time":1578627660,"precipIntensity":0,"precipProbability":0},{"time":1578627720,"precipIntensity":0,"precipProbability":0},{"time":1578627780,"precipIntensity":0,"precipProbability":0},{"time":1578627840,"precipIntensity":0,"precipProbability":0},{"time":1578627900,"precipIntensity":0,"precipProbability":0},{"time":1578627960,"precipIntensity":0,"precipProbability":0},{"time":1578628020,"precipIntensity":0,"precipProbability":0},{"time":1578628080,"precipIntensity":0,"precipProbability":0},{"time":1578628140,"precipIntensity":0,"precipProbability":0},{"time":1578628200,"precipIntensity":0,"precipProbability":0},{"time":1578628260,"precipIntensity":0,"precipProbability":0},{"time":1578628320,"precipIntensity":0,"precipProbability":0},{"time":1578628380,"precipIntensity":0,"precipProbability":0},{"time":1578628440,"precipIntensity":0,"precipProbability":0},{"time":1578628500,"precipIntensity":0,"precipProbability":0},{"time":1578628560,"precipIntensity":0,"precipProbability":0},{"time":1578628620,"precipIntensity":0,"precipProbability":0},{"time":1578628680,"precipIntensity":0,"precipProbability":0},{"time":1578628740,"precipIntensity":0,"precipProbability":0},{"time":1578628800,"precipIntensity":0,"precipProbability":0},{"time":1578628860,"precipIntensity":0,"precipProbability":0},{"time":1578628920,"precipIntensity":0,"precipProbability":0},{"time":1578628980,"precipIntensity":0,"precipProbability":0},{"time":1578629040,"precipIntensity":0,"precipProbability":0},{"time":1578629100,"precipIntensity":0,"precipProbability":0},{"time":1578629160,"precipIntensity":0,"precipProbability":0},{"time":1578629220,"precipIntensity":0,"precipProbability":0},{"time":1578629280,"precipIntensity":0,"precipProbability":0},{"time":1578629340,"precipIntensity":0,"precipProbability":0},{"time":1578629400,"precipIntensity":0,"precipProbability":0},{"time":1578629460,"precipIntensity":0,"precipProbability":0},{"time":1578629520,"precipIntensity":0,"precipProbability":0},{"time":1578629580,"precipIntensity":0,"precipProbability":0},{"time":1578629640,"precipIntensity":0,"precipProbability":0},{"time":1578629700,"precipIntensity":0,"precipProbability":0},{"time":1578629760,"precipIntensity":0,"precipProbability":0}]},"hourly":{"summary":"Partly cloudy throughout the day.","icon":"partly-cloudy-day","data":[{"time":1578625200,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":50.26,"apparentTemperature":50.26,"dewPoint":42.87,"humidity":0.76,"pressure":1021.5,"windSpeed":2.47,"windGust":4.22,"windBearing":300,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":363.6},{"time":1578628800,"summary":"Clear","icon":"clear-night","precipIntensity":0.0004,"precipProbability":0.01,"precipType":"rain","temperature":49.72,"apparentTemperature":49.72,"dewPoint":43.01,"humidity":0.78,"pressure":1021.9,"windSpeed":2.91,"windGust":4.46,"windBearing":276,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":359.7},{"time":1578632400,"summary":"Clear","icon":"clear-night","precipIntensity":0.0007,"precipProbability":0.01,"precipType":"rain","temperature":49.69,"apparentTemperature":48.41,"dewPoint":43.73,"humidity":0.8,"pressure":1022.8,"windSpeed":4.15,"windGust":5.57,"windBearing":309,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":354.2},{"time":1578636000,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":49.91,"apparentTemperature":48.21,"dewPoint":44.34,"humidity":0.81,"pressure":1023.2,"windSpeed":4.85,"windGust":6.02,"windBearing":317,"cloudCover":0.01,"uvIndex":0,"visibility":10,"ozone":349.7},{"time":1578639600,"summary":"Clear","icon":"clear-night","precipIntensity":0.0017,"precipProbability":0.01,"precipType":"rain","temperature":49.58,"apparentTemperature":47.79,"dewPoint":43.85,"humidity":0.81,"pressure":1023.4,"windSpeed":4.89,"windGust":5.73,"windBearing":323,"cloudCover":0.03,"uvIndex":0,"visibility":10,"ozone":347.5},{"time":1578643200,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":49.33,"apparentTemperature":47.53,"dewPoint":43.05,"humidity":0.79,"pressure":1023.3,"windSpeed":4.83,"windGust":5.34,"windBearing":317,"cloudCover":0.07,"uvIndex":0,"visibility":10,"ozone":346.4},{"time":1578646800,"summary":"Clear","icon":"clear-night","precipIntensity":0.0022,"precipProbability":0.01,"precipType":"rain","temperature":48.9,"apparentTemperature":46.99,"dewPoint":42.48,"humidity":0.78,"pressure":1023.5,"windSpeed":4.91,"windGust":5.52,"windBearing":321,"cloudCover":0.1,"uvIndex":0,"visibility":10,"ozone":345.2},{"time":1578650400,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":48.35,"apparentTemperature":46.31,"dewPoint":42.39,"humidity":0.8,"pressure":1023.8,"windSpeed":4.96,"windGust":5.96,"windBearing":344,"cloudCover":0.14,"uvIndex":0,"visibility":10,"ozone":343.4},{"time":1578654000,"summary":"Clear","icon":"clear-night","precipIntensity":0.0003,"precipProbability":0.01,"precipType":"rain","temperature":47.64,"apparentTemperature":45.68,"dewPoint":42.18,"humidity":0.81,"pressure":1024.5,"windSpeed":4.64,"windGust":5.16,"windBearing":12,"cloudCover":0.17,"uvIndex":0,"visibility":10,"ozone":341.5},{"time":1578657600,"summary":"Clear","icon":"clear-night","precipIntensity":0.0005,"precipProbability":0.01,"precipType":"rain","temperature":47.07,"apparentTemperature":45.03,"dewPoint":41.8,"humidity":0.82,"pressure":1024.9,"windSpeed":4.62,"windGust":4.99,"windBearing":31,"cloudCover":0.2,"uvIndex":0,"visibility":10,"ozone":339.7},{"time":1578661200,"summary":"Clear","icon":"clear-night","precipIntensity":0.0017,"precipProbability":0.01,"precipType":"rain","temperature":46.57,"apparentTemperature":44.38,"dewPoint":41.24,"humidity":0.82,"pressure":1025,"windSpeed":4.71,"windGust":5.23,"windBearing":47,"cloudCover":0.22,"uvIndex":0,"visibility":10,"ozone":338.1},{"time":1578664800,"summary":"Clear","icon":"clear-night","precipIntensity":0.0022,"precipProbability":0.01,"precipType":"rain","temperature":45.89,"apparentTemperature":43.63,"dewPoint":40.48,"humidity":0.81,"pressure":1025.2,"windSpeed":4.65,"windGust":5.2,"windBearing":61,"cloudCover":0.22,"uvIndex":0,"visibility":10,"ozone":336.8},{"time":1578668400,"summary":"Clear","icon":"clear-night","precipIntensity":0.0005,"precipProbability":0.01,"precipType":"rain","temperature":45.55,"apparentTemperature":43.51,"dewPoint":39.77,"humidity":0.8,"pressure":1025.6,"windSpeed":4.28,"windGust":4.85,"windBearing":56,"cloudCover":0.23,"uvIndex":0,"visibility":10,"ozone":335.5},{"time":1578672000,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0007,"precipProbability":0.01,"precipType":"rain","temperature":44.65,"apparentTemperature":42.85,"dewPoint":38.56,"humidity":0.79,"pressure":1026.6,"windSpeed":3.81,"windGust":4.01,"windBearing":67,"cloudCover":0.35,"uvIndex":0,"visibility":10,"ozone":334.5},{"time":1578675600,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0007,"precipProbability":0.01,"precipType":"rain","temperature":45.58,"apparentTemperature":44.08,"dewPoint":38.36,"humidity":0.76,"pressure":1027.9,"windSpeed":3.63,"windGust":3.92,"windBearing":81,"cloudCover":0.35,"uvIndex":0,"visibility":10,"ozone":333.6},{"time":1578679200,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0006,"precipProbability":0.01,"precipType":"rain","temperature":46.83,"apparentTemperature":45.66,"dewPoint":38.4,"humidity":0.72,"pressure":1028.5,"windSpeed":3.45,"windGust":3.81,"windBearing":81,"cloudCover":0.35,"uvIndex":1,"visibility":10,"ozone":332.6},{"time":1578682800,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0004,"precipProbability":0.01,"precipType":"rain","temperature":48.37,"apparentTemperature":47.74,"dewPoint":38.72,"humidity":0.69,"pressure":1027.8,"windSpeed":3.11,"windGust":3.34,"windBearing":85,"cloudCover":0.35,"uvIndex":2,"visibility":10,"ozone":331.4},{"time":1578686400,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":50.43,"apparentTemperature":50.43,"dewPoint":38.72,"humidity":0.64,"pressure":1026.6,"windSpeed":2.76,"windGust":2.76,"windBearing":204,"cloudCover":0.33,"uvIndex":2,"visibility":10,"ozone":330.1},{"time":1578690000,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0002,"precipProbability":0.01,"precipType":"rain","temperature":52.12,"apparentTemperature":52.12,"dewPoint":38.76,"humidity":0.6,"pressure":1025.8,"windSpeed":2.91,"windGust":2.91,"windBearing":255,"cloudCover":0.33,"uvIndex":2,"visibility":10,"ozone":329.1},{"time":1578693600,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0005,"precipProbability":0.01,"precipType":"rain","temperature":53.14,"apparentTemperature":53.14,"dewPoint":39.36,"humidity":0.59,"pressure":1025.7,"windSpeed":4.04,"windGust":4.2,"windBearing":265,"cloudCover":0.35,"uvIndex":1,"visibility":10,"ozone":328.1},{"time":1578697200,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0015,"precipProbability":0.01,"precipType":"rain","temperature":53.27,"apparentTemperature":53.27,"dewPoint":40.58,"humidity":0.62,"pressure":1025.9,"windSpeed":5.7,"windGust":6.3,"windBearing":266,"cloudCover":0.39,"uvIndex":1,"visibility":10,"ozone":327.3},{"time":1578700800,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0022,"precipProbability":0.01,"precipType":"rain","temperature":52.73,"apparentTemperature":52.73,"dewPoint":41.54,"humidity":0.66,"pressure":1026,"windSpeed":6.96,"windGust":8.18,"windBearing":264,"cloudCover":0.44,"uvIndex":0,"visibility":10,"ozone":326.9},{"time":1578704400,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0015,"precipProbability":0.01,"precipType":"rain","temperature":51.78,"apparentTemperature":51.78,"dewPoint":42.58,"humidity":0.71,"pressure":1026.2,"windSpeed":7.45,"windGust":9.44,"windBearing":259,"cloudCover":0.5,"uvIndex":0,"visibility":10,"ozone":326.9},{"time":1578708000,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0007,"precipProbability":0.01,"precipType":"rain","temperature":50.43,"apparentTemperature":50.43,"dewPoint":43.36,"humidity":0.77,"pressure":1026.3,"windSpeed":7.56,"windGust":10.34,"windBearing":261,"cloudCover":0.55,"uvIndex":0,"visibility":10,"ozone":327.2},{"time":1578711600,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0005,"precipProbability":0.01,"precipType":"rain","temperature":49.41,"apparentTemperature":46.29,"dewPoint":44.12,"humidity":0.82,"pressure":1026.5,"windSpeed":7.43,"windGust":10.6,"windBearing":269,"cloudCover":0.58,"uvIndex":0,"visibility":10,"ozone":327.9},{"time":1578715200,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0004,"precipProbability":0.02,"precipType":"rain","temperature":49.18,"apparentTemperature":46.26,"dewPoint":44.65,"humidity":0.84,"pressure":1026.6,"windSpeed":6.87,"windGust":9.74,"windBearing":316,"cloudCover":0.56,"uvIndex":0,"visibility":10,"ozone":329.1},{"time":1578718800,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0004,"precipProbability":0.03,"precipType":"rain","temperature":49.03,"apparentTemperature":46.47,"dewPoint":45.04,"humidity":0.86,"pressure":1026.8,"windSpeed":6.1,"windGust":8.28,"windBearing":203,"cloudCover":0.52,"uvIndex":0,"visibility":10,"ozone":330.6},{"time":1578722400,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0005,"precipProbability":0.06,"precipType":"rain","temperature":49.37,"apparentTemperature":47.05,"dewPoint":45.59,"humidity":0.87,"pressure":1026.8,"windSpeed":5.75,"windGust":7.47,"windBearing":245,"cloudCover":0.5,"uvIndex":0,"visibility":10,"ozone":332},{"time":1578726000,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0018,"precipProbability":0.13,"precipType":"rain","temperature":49.79,"apparentTemperature":47.3,"dewPoint":46.65,"humidity":0.89,"pressure":1026.4,"windSpeed":6.23,"windGust":7.73,"windBearing":244,"cloudCover":0.61,"uvIndex":0,"visibility":10,"ozone":333},{"time":1578729600,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0057,"precipProbability":0.21,"precipType":"rain","temperature":50.27,"apparentTemperature":50.27,"dewPoint":47.53,"humidity":0.9,"pressure":1026,"windSpeed":7.16,"windGust":8.67,"windBearing":227,"cloudCover":0.77,"uvIndex":0,"visibility":10,"ozone":333.8},{"time":1578733200,"summary":"Overcast","icon":"cloudy","precipIntensity":0.0091,"precipProbability":0.24,"precipType":"rain","temperature":50.77,"apparentTemperature":50.77,"dewPoint":47.96,"humidity":0.9,"pressure":1025.6,"windSpeed":7.92,"windGust":10.21,"windBearing":202,"cloudCover":0.89,"uvIndex":0,"visibility":10,"ozone":334.8},{"time":1578736800,"summary":"Overcast","icon":"cloudy","precipIntensity":0.0087,"precipProbability":0.24,"precipType":"rain","temperature":51.14,"apparentTemperature":51.14,"dewPoint":48.56,"humidity":0.91,"pressure":1025.4,"windSpeed":8.3,"windGust":12.99,"windBearing":169,"cloudCover":0.94,"uvIndex":0,"visibility":10,"ozone":336.1},{"time":1578740400,"summary":"Overcast","icon":"cloudy","precipIntensity":0.0077,"precipProbability":0.23,"precipType":"rain","temperature":51.7,"apparentTemperature":51.7,"dewPoint":48.94,"humidity":0.9,"pressure":1025.3,"windSpeed":8.53,"windGust":16.48,"windBearing":327,"cloudCover":0.93,"uvIndex":0,"visibility":10,"ozone":337.5},{"time":1578744000,"summary":"Overcast","icon":"cloudy","precipIntensity":0.0071,"precipProbability":0.22,"precipType":"rain","temperature":51.63,"apparentTemperature":51.63,"dewPoint":48.75,"humidity":0.9,"pressure":1025.3,"windSpeed":8.7,"windGust":18.69,"windBearing":273,"cloudCover":0.9,"uvIndex":0,"visibility":10,"ozone":338.7},{"time":1578747600,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0046,"precipProbability":0.18,"precipType":"rain","temperature":50.81,"apparentTemperature":50.81,"dewPoint":47.48,"humidity":0.88,"pressure":1025.4,"windSpeed":8.6,"windGust":18.26,"windBearing":237,"cloudCover":0.75,"uvIndex":0,"visibility":10,"ozone":339.5},{"time":1578751200,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0019,"precipProbability":0.13,"precipType":"rain","temperature":49.83,"apparentTemperature":46.43,"dewPoint":45.64,"humidity":0.85,"pressure":1025.7,"windSpeed":8.33,"windGust":16.54,"windBearing":342,"cloudCover":0.55,"uvIndex":0,"visibility":10,"ozone":340.1},{"time":1578754800,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0008,"precipProbability":0.1,"precipType":"rain","temperature":49.06,"apparentTemperature":45.43,"dewPoint":44.41,"humidity":0.84,"pressure":1026.1,"windSpeed":8.46,"windGust":15.69,"windBearing":304,"cloudCover":0.4,"uvIndex":0,"visibility":10,"ozone":341.3},{"time":1578758400,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0004,"precipProbability":0.06,"precipType":"rain","temperature":49.46,"apparentTemperature":45.55,"dewPoint":43.73,"humidity":0.81,"pressure":1026.6,"windSpeed":9.46,"windGust":16.85,"windBearing":292,"cloudCover":0.39,"uvIndex":0,"visibility":10,"ozone":343.8},{"time":1578762000,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0002,"precipProbability":0.04,"precipType":"rain","temperature":50.66,"apparentTemperature":50.66,"dewPoint":43.65,"humidity":0.77,"pressure":1027.2,"windSpeed":10.9,"windGust":18.84,"windBearing":300,"cloudCover":0.42,"uvIndex":0,"visibility":10,"ozone":346.9},{"time":1578765600,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":51.87,"apparentTemperature":51.87,"dewPoint":43.63,"humidity":0.73,"pressure":1027.3,"windSpeed":12.04,"windGust":20.26,"windBearing":304,"cloudCover":0.42,"uvIndex":1,"visibility":10,"ozone":349.2},{"time":1578769200,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":52.7,"apparentTemperature":52.7,"dewPoint":43.1,"humidity":0.7,"pressure":1026.9,"windSpeed":12.58,"windGust":20.47,"windBearing":304,"cloudCover":0.37,"uvIndex":2,"visibility":10,"ozone":349.9},{"time":1578772800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":53.95,"apparentTemperature":53.95,"dewPoint":42.9,"humidity":0.66,"pressure":1026.2,"windSpeed":12.82,"windGust":20.1,"windBearing":303,"cloudCover":0.31,"uvIndex":2,"visibility":10,"ozone":349.7},{"time":1578776400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":54.85,"apparentTemperature":54.85,"dewPoint":42.58,"humidity":0.63,"pressure":1025.6,"windSpeed":12.95,"windGust":19.71,"windBearing":303,"cloudCover":0.25,"uvIndex":2,"visibility":10,"ozone":349.5},{"time":1578780000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":55.32,"apparentTemperature":55.32,"dewPoint":42.3,"humidity":0.61,"pressure":1025.1,"windSpeed":13.15,"windGust":19.46,"windBearing":303,"cloudCover":0.22,"uvIndex":1,"visibility":10,"ozone":349.5},{"time":1578783600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":55.06,"apparentTemperature":55.06,"dewPoint":42.04,"humidity":0.61,"pressure":1024.8,"windSpeed":13.22,"windGust":19.17,"windBearing":302,"cloudCover":0.18,"uvIndex":1,"visibility":10,"ozone":349.6},{"time":1578787200,"summary":"Clear","icon":"clear-day","precipIntensity":0.0002,"precipProbability":0.01,"precipType":"rain","temperature":54.38,"apparentTemperature":54.38,"dewPoint":41.96,"humidity":0.63,"pressure":1024.8,"windSpeed":13.09,"windGust":18.96,"windBearing":303,"cloudCover":0.15,"uvIndex":0,"visibility":10,"ozone":350.5},{"time":1578790800,"summary":"Clear","icon":"clear-day","precipIntensity":0.0003,"precipProbability":0.01,"precipType":"rain","temperature":53.01,"apparentTemperature":53.01,"dewPoint":41.84,"humidity":0.66,"pressure":1024.8,"windSpeed":12.64,"windGust":19.14,"windBearing":305,"cloudCover":0.12,"uvIndex":0,"visibility":10,"ozone":353},{"time":1578794400,"summary":"Clear","icon":"clear-night","precipIntensity":0.0003,"precipProbability":0.01,"precipType":"rain","temperature":51.42,"apparentTemperature":51.42,"dewPoint":42.21,"humidity":0.71,"pressure":1024.8,"windSpeed":11.98,"windGust":19.42,"windBearing":307,"cloudCover":0.1,"uvIndex":0,"visibility":10,"ozone":356.3},{"time":1578798000,"summary":"Clear","icon":"clear-night","precipIntensity":0.0003,"precipProbability":0.01,"precipType":"rain","temperature":49.94,"apparentTemperature":45.56,"dewPoint":41.89,"humidity":0.74,"pressure":1024.9,"windSpeed":11.28,"windGust":18.97,"windBearing":309,"cloudCover":0.09,"uvIndex":0,"visibility":10,"ozone":357.9}]},"daily":{"summary":"Light rain throughout the week.","icon":"rain","data":[{"time":1578556800,"summary":"Possible light rain in the morning.","icon":"rain","sunriseTime":1578583620,"sunsetTime":1578618540,"moonPhase":0.48,"precipIntensity":0.0074,"precipIntensityMax":0.0428,"precipIntensityMaxTime":1578572640,"precipProbability":0.64,"precipType":"rain","temperatureHigh":53.73,"temperatureHighTime":1578614040,"temperatureLow":44.16,"temperatureLowTime":1578672000,"apparentTemperatureHigh":53.23,"apparentTemperatureHighTime":1578614040,"apparentTemperatureLow":42.84,"apparentTemperatureLowTime":1578671760,"dewPoint":45.32,"humidity":0.8,"pressure":1018.6,"windSpeed":8.46,"windGust":23.23,"windGustTime":1578582540,"windBearing":326,"cloudCover":0.36,"uvIndex":2,"uvIndexTime":1578602520,"visibility":9.981,"ozone":369.5,"temperatureMin":48.84,"temperatureMinTime":1578643200,"temperatureMax":53.73,"temperatureMaxTime":1578614040,"apparentTemperatureMin":47.53,"apparentTemperatureMinTime":1578643200,"apparentTemperatureMax":53.23,"apparentTemperatureMaxTime":1578614040},{"time":1578643200,"summary":"Partly cloudy throughout the day.","icon":"partly-cloudy-day","sunriseTime":1578669960,"sunsetTime":1578705000,"moonPhase":0.51,"precipIntensity":0.001,"precipIntensityMax":0.0057,"precipIntensityMaxTime":1578729600,"precipProbability":0.21,"precipType":"rain","temperatureHigh":53.81,"temperatureHighTime":1578695940,"temperatureLow":48.54,"temperatureLowTime":1578718380,"apparentTemperatureHigh":53.31,"apparentTemperatureHighTime":1578695940,"apparentTemperatureLow":45.09,"apparentTemperatureLowTime":1578756960,"dewPoint":41.69,"humidity":0.76,"pressure":1026,"windSpeed":5.1,"windGust":10.63,"windGustTime":1578710880,"windBearing":278,"cloudCover":0.36,"uvIndex":2,"uvIndexTime":1578687480,"visibility":10,"ozone":333.4,"temperatureMin":44.16,"temperatureMinTime":1578672000,"temperatureMax":53.81,"temperatureMaxTime":1578695940,"apparentTemperatureMin":42.84,"apparentTemperatureMinTime":1578671760,"apparentTemperatureMax":53.31,"apparentTemperatureMaxTime":1578695940},{"time":1578729600,"summary":"Clear throughout the day.","icon":"rain","sunriseTime":1578756360,"sunsetTime":1578791460,"moonPhase":0.55,"precipIntensity":0.0019,"precipIntensityMax":0.0092,"precipIntensityMaxTime":1578734160,"precipProbability":0.41,"precipType":"rain","temperatureHigh":55.83,"temperatureHighTime":1578780360,"temperatureLow":43.64,"temperatureLowTime":1578838800,"apparentTemperatureHigh":55.33,"apparentTemperatureHighTime":1578780360,"apparentTemperatureLow":40.71,"apparentTemperatureLowTime":1578838080,"dewPoint":43.83,"humidity":0.76,"pressure":1025.5,"windSpeed":10.44,"windGust":20.49,"windGustTime":1578768000,"windBearing":301,"cloudCover":0.38,"uvIndex":2,"uvIndexTime":1578774060,"visibility":10,"ozone":347.1,"temperatureMin":46.91,"temperatureMinTime":1578816000,"temperatureMax":55.83,"temperatureMaxTime":1578780360,"apparentTemperatureMin":43.48,"apparentTemperatureMinTime":1578816000,"apparentTemperatureMax":55.33,"apparentTemperatureMaxTime":1578780360},{"time":1578816000,"summary":"Partly cloudy throughout the day.","icon":"partly-cloudy-day","sunriseTime":1578842760,"sunsetTime":1578877920,"moonPhase":0.59,"precipIntensity":0.0024,"precipIntensityMax":0.0121,"precipIntensityMaxTime":1578893160,"precipProbability":0.32,"precipType":"rain","temperatureHigh":53.66,"temperatureHighTime":1578867540,"temperatureLow":48.29,"temperatureLowTime":1578913380,"apparentTemperatureHigh":53.16,"apparentTemperatureHighTime":1578867540,"apparentTemperatureLow":43.91,"apparentTemperatureLowTime":1578913920,"dewPoint":41.09,"humidity":0.75,"pressure":1023.8,"windSpeed":8.72,"windGust":19.24,"windGustTime":1578882900,"windBearing":296,"cloudCover":0.43,"uvIndex":2,"uvIndexTime":1578859500,"visibility":10,"ozone":359.8,"temperatureMin":43.64,"temperatureMinTime":1578838800,"temperatureMax":53.66,"temperatureMaxTime":1578867540,"apparentTemperatureMin":40.71,"apparentTemperatureMinTime":1578838080,"apparentTemperatureMax":53.16,"apparentTemperatureMaxTime":1578867540},{"time":1578902400,"summary":"Possible light rain overnight.","icon":"rain","sunriseTime":1578929160,"sunsetTime":1578964380,"moonPhase":0.63,"precipIntensity":0.0009,"precipIntensityMax":0.0172,"precipIntensityMaxTime":1578988800,"precipProbability":0.43,"precipType":"rain","temperatureHigh":55.31,"temperatureHighTime":1578950340,"temperatureLow":47,"temperatureLowTime":1579012620,"apparentTemperatureHigh":54.81,"apparentTemperatureHighTime":1578950340,"apparentTemperatureLow":42.08,"apparentTemperatureLowTime":1579012500,"dewPoint":41.7,"humidity":0.71,"pressure":1022.8,"windSpeed":9.99,"windGust":20.78,"windGustTime":1578912660,"windBearing":281,"cloudCover":0.14,"uvIndex":2,"uvIndexTime":1578946800,"visibility":10,"ozone":356.6,"temperatureMin":48.29,"temperatureMinTime":1578913380,"temperatureMax":55.31,"temperatureMaxTime":1578950340,"apparentTemperatureMin":43.91,"apparentTemperatureMinTime":1578913920,"apparentTemperatureMax":54.81,"apparentTemperatureMaxTime":1578950340},{"time":1578988800,"summary":"Possible drizzle in the morning.","icon":"rain","sunriseTime":1579015500,"sunsetTime":1579050840,"moonPhase":0.66,"precipIntensity":0.0043,"precipIntensityMax":0.0264,"precipIntensityMaxTime":1578992880,"precipProbability":0.66,"precipType":"rain","temperatureHigh":50.52,"temperatureHighTime":1579025040,"temperatureLow":39.64,"temperatureLowTime":1579099740,"apparentTemperatureHigh":50.02,"apparentTemperatureHighTime":1579024860,"apparentTemperatureLow":36.7,"apparentTemperatureLowTime":1579100220,"dewPoint":39.78,"humidity":0.72,"pressure":1022.3,"windSpeed":10.46,"windGust":25.34,"windGustTime":1579012920,"windBearing":291,"cloudCover":0.43,"uvIndex":2,"uvIndexTime":1579034100,"visibility":9.839,"ozone":330.3,"temperatureMin":45.2,"temperatureMinTime":1579075200,"temperatureMax":51.21,"temperatureMaxTime":1578988800,"apparentTemperatureMin":42.08,"apparentTemperatureMinTime":1579012500,"apparentTemperatureMax":50.71,"apparentTemperatureMaxTime":1578988800},{"time":1579075200,"summary":"Overcast throughout the day.","icon":"cloudy","sunriseTime":1579101900,"sunsetTime":1579137300,"moonPhase":0.7,"precipIntensity":0,"precipIntensityMax":0.0002,"precipIntensityMaxTime":1579143600,"precipProbability":0.03,"temperatureHigh":50.11,"temperatureHighTime":1579130040,"temperatureLow":45.86,"temperatureLowTime":1579151700,"apparentTemperatureHigh":47.81,"apparentTemperatureHighTime":1579125900,"apparentTemperatureLow":41.12,"apparentTemperatureLowTime":1579177260,"dewPoint":34.36,"humidity":0.66,"pressure":1019.3,"windSpeed":5.14,"windGust":19.08,"windGustTime":1579161600,"windBearing":57,"cloudCover":0.81,"uvIndex":2,"uvIndexTime":1579119420,"visibility":10,"ozone":327,"temperatureMin":39.64,"temperatureMinTime":1579099740,"temperatureMax":50.11,"temperatureMaxTime":1579130040,"apparentTemperatureMin":36.7,"apparentTemperatureMinTime":1579100220,"apparentTemperatureMax":47.81,"apparentTemperatureMaxTime":1579125900},{"time":1579161600,"summary":"Light rain throughout the day.","icon":"rain","sunriseTime":1579188300,"sunsetTime":1579223760,"moonPhase":0.74,"precipIntensity":0.0188,"precipIntensityMax":0.0587,"precipIntensityMaxTime":1579206000,"precipProbability":0.86,"precipType":"rain","temperatureHigh":53.82,"temperatureHighTime":1579218240,"temperatureLow":50.57,"temperatureLowTime":1579230960,"apparentTemperatureHigh":53.32,"apparentTemperatureHighTime":1579218240,"apparentTemperatureLow":51.06,"apparentTemperatureLowTime":1579230960,"dewPoint":41.51,"humidity":0.72,"pressure":1011.8,"windSpeed":18.17,"windGust":37.44,"windGustTime":1579195980,"windBearing":198,"cloudCover":0.92,"uvIndex":2,"uvIndexTime":1579205880,"visibility":8.932,"ozone":349.7,"temperatureMin":46.18,"temperatureMinTime":1579167420,"temperatureMax":53.82,"temperatureMaxTime":1579218240,"apparentTemperatureMin":41.12,"apparentTemperatureMinTime":1579177260,"apparentTemperatureMax":53.32,"apparentTemperatureMaxTime":1579218240}]},"flags":{"sources":["nwspa","cmc","gfs","hrrr","icon","isd","madis","nam","sref","darksky","nearest-precip"],"nearest-station":2.24,"units":"us"},"offset":-8}
})
    /*
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition((position) => { 
        this.fetchWeatherData(position.coords.latitude, position.coords.longitude);
        this.reverseGeocode(position.coords.latitude, position.coords.longitude);
      }, (error) => { 
        console.log(error) 
      });
    }
    */
  }
  changeLocation = (loc) => {
    this.setState({ location: loc });
  }
  changeQuery = (e) => {
    this.setState({ searchQuery: e.target.value });
  }
  searchGoogle = (e, searchArrowClicked) => {
    if (this.state.searchQuery !== '') {
      if (searchArrowClicked || e.key === 'Enter') {
        window.open(`https://google.com/search?q=${this.state.searchQuery}`);
      }
    }
  }
  reverseGeocode = (lat, long) => {
    axios.get(`/.netlify/functions/reverse_geocode?lat=${lat}&long=${long}`, { responseType: 'text' })
      .then((response) => {
        this.setState({ location: response.data.results[0].locations[0].adminArea5 });
      })
      .catch((error) => {
        console.log(error);
      });
  }
	fetchWeatherData = (lat, long) => {
    axios.get(`/.netlify/functions/forecast?lat=${lat}&long=${long}`, { responseType: 'text' })
      .then((response) => {
        this.setState({ weatherData: response.data });
      })
      .catch((error) => {
        console.log(error);
      });
  }
  render() {
    return (
      <div className="h-screen bg-center bg-cover" style={{ backgroundImage:`url("https://images.unsplash.com/photo-1501612272219-9f77e47daef5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2550&q=80")` }}>
        <section className="flex flex-col justify-between h-full px-24 pt-16 pb-24">
          <div className="flex items-center">
            <span className="text-2xl font-semibold tracking-wider text-white">weather.app</span>
            <div className="relative w-1/6 mt-5">
              <div className="absolute inset-y-0 left-0 flex items-center pl-4">
                <svg className="w-5 h-5" viewBox="0 0 533.5 544.3">
                  <defs/>
                  <path fill="#4285f4" d="M533.5 278.4c0-18.5-1.5-37.1-4.7-55.3H272.1v104.8h147c-6.1 33.8-25.7 63.7-54.4 82.7v68h87.7c51.5-47.4 81.1-117.4 81.1-200.2z"/>
                  <path fill="#34a853" d="M272.1 544.3c73.4 0 135.3-24.1 180.4-65.7l-87.7-68c-24.4 16.6-55.9 26-92.6 26-71 0-131.2-47.9-152.8-112.3H28.9v70.1c46.2 91.9 140.3 149.9 243.2 149.9z"/>
                  <path fill="#fbbc04" d="M119.3 324.3c-11.4-33.8-11.4-70.4 0-104.2V150H28.9c-38.6 76.9-38.6 167.5 0 244.4l90.4-70.1z"/>
                  <path fill="#ea4335" d="M272.1 107.7c38.8-.6 76.3 14 104.4 40.8l77.7-77.7C405 24.6 339.7-.8 272.1 0 169.2 0 75.1 58 28.9 150l90.4 70.1c21.5-64.5 81.8-112.4 152.8-112.4z"/>
                </svg>
              </div>
              <input onKeyPress={ this.searchGoogle } onChange={ this.changeQuery } className="block w-full px-12 py-2 text-gray-900 placeholder-gray-900 bg-white rounded-full focus:shadow-outline" placeholder="Search with Google" />
              <div className="absolute inset-y-0 right-0 flex items-center pr-4">
                <svg onClick={ () => this.searchGoogle(null, true) } className="w-5 h-5 text-gray-700 cursor-pointer fill-current" viewBox="0 0 24 24">
                  <defs/>
                  <path d="M18.59 13H3a1 1 0 010-2h15.59l-5.3-5.3a1 1 0 111.42-1.4l7 7a1 1 0 010 1.4l-7 7a1 1 0 01-1.42-1.4l5.3-5.3z" className="heroicon-ui"/>
                </svg>
              </div>
            </div>
          </div>
          <div className="flex items-center font-semibold leading-none text-white">
            <span className="text-6xl">{ this.state.weatherData ? this.state.weatherData.currently.temperature.toFixed() + '°' : '...'}</span>
            <div className="px-16">
              <span className="text-6xl">{ this.state.location ? this.state.location : '...' }</span>
              { this.state.weatherData ? 
                <span className="block pt-3 pl-1 text-2xl">{ moment().tz(this.state.weatherData.timezone).format('h:mm a / ddd, MMM Do YYYY') }</span> :
                <span className="block pt-3 pl-1 text-2xl">{ moment().format('h:mm a / ddd MMM Do YYYY') }</span>
              }
            </div>
            <div className="flex items-center">
              { this.state.weatherData ? <WeatherIcon className="h-16 text-white fill-current" icon={ this.state.weatherData.currently.icon } /> : null }
              <span className="pl-6 text-2xl leading-none">{ this.state.weatherData ? this.state.weatherData.currently.summary : '...' }</span>
            </div>
          </div>
        </section>
        <section className="absolute top-0 right-0 h-full shadow-xl" style={{ width: '735px' }}>
          <Sidebar weatherData={ this.state.weatherData } location={ this.state.location } changeLocation={ this.changeLocation } fetchWeatherData={ this.fetchWeatherData } />
        </section>
      </div>
    );
  }
}

export default App;
